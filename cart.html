<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
      rel="stylesheet">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wax and warmth</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="/images/logo.jpg">
    <link rel="shortcut icon" type="image/jpeg" href="/images/logo.jpg">
    <link rel="apple-touch-icon" href="/images/logo.jpg">
    
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <style>
        #cart-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            max-width: 90%;
            margin: 0 auto;
        }
        #total-amount {
            font-size: 22px;
            font-weight: bold;
        }
        .checkout-btn {
            padding: 12px 24px;
            background: #333;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }
        .checkout-btn:hover {
            background: #555;
        }
        
        /* Mobile-specific styles */
        @media (max-width: 768px) {
            #cart table {
                font-size: 12px;
            }
            #cart table td {
                padding: 8px 4px;
            }
            #cart table img {
                width: 40px !important;
            }
            .checkout-btn {
                padding: 10px 20px;
                font-size: 14px;
            }
            #cart-summary {
                flex-direction: column;
                gap: 15px;
            }
            #total-amount {
                font-size: 18px;
            }
            /* Make table scrollable on mobile */
            #cart {
                overflow-x: auto;
            }
        }
    </style>
  </head>
  <body>

    <section id="header">
      <a href="/shop.html"><img src="/images/logo.jpg" height="80" class="logo"
          alt="Company Logo" /></a>
      <div>
        <ul id="navbar">
          <li><a href="/">Home</a></li>
          <li><a href="/shop.html">Shop</a></li>
          <li><a href="/blog.html">Blog</a></li>
          <li><a href="/about.html">About</a></li>
          <li><a href="/contact.html">Contact</a></li>
          <li><a href="/admin-login.html" style="opacity: 0.7; font-size: 0.9em;"><i class="fa-solid fa-user-shield"></i> Admin</a></li>
          <li><a class="active" href="/cart.html"><i
                class="fa-solid fa-cart-shopping"> cart</i></a></li>
          <a href="#" id="close"><i class="fa-solid fa-xmark"></i></a>

        </ul>
        <div id="mobile">
          <a href="/cart.html"><i
              class="fa-solid fa-cart-shopping">cart</i> </a>
          <i id="bar" class="fas fa-outdent"></i>
        </div>

      </div>
    </section>

    <section id="cart" class="section-p1">
      <table width="100%">
        <thead>
          <tr>
            <td>Remove</td>
            <td>Image</td>
            <td>Product</td>
            <td>Price</td>
            <td>Quantity</td>
            <td>Subtotal</td>
          </tr>
        </thead>
        <tbody id="cart-body">
          <!-- JavaScript will inject rows here -->
        </tbody>
      </table>
    </section>

    <div id="cart-summary">
      <div id="total-amount">Total: ₹0</div>
      <a id="whatsapp-link" href="javascript:void(0);" onclick="checkoutMobile()">
        <button class="checkout-btn">Checkout on WhatsApp</button>
      </a>

    </div>

    <footer id="footer">
  <div class="footer-left">
    <img src="/images/logo.jpg" alt="Wax and Warmth Logo" height="60">
    <p>&copy; 2025 Wax and Warmth</p>
    <nav>
      <a href="/">Home</a> |
      <a href="/blog.html">Blog</a> |
      <a href="/about.html">About</a> |
      <a href="/contact.html">Contact</a>
    </nav>
  </div>

  <div class="footer-center">
    <p><i class="fas fa-map-marker-alt"></i> Govindpur, Dhanbad, India</p>
    <p><i class="fas fa-phone-alt"></i> +91 6200835077</p>
    <p><i class="fas fa-envelope"></i> realwaxandwarmth@gmail.com</p>
  </div>

  <div class="footer-right">
    <h4>About Wax and Warmth</h4>
    <p>Hand-poured candles made with love and warmth. Crafted to fill your
      space with gentle aromas and cozy vibes.</p>
    <div class="social-icons">
      <a href="https://www.instagram.com/wax_and_warmth" target="_blank"><i class="fab fa-instagram"></i></a>
      <a href="https://wa.me/916200835077" target="_blank"><i class="fab fa-whatsapp"></i></a>
    </div>
  </div>
</footer>


    <script src="/script.js"></script>
    <script>
// Enhanced mobile-friendly cart loading
function loadCartMobile() {
    try {
        console.log('Loading cart...');
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        console.log('Cart data:', cart);
        
        if (typeof displayCartTable === 'function') {
            displayCartTable();
            console.log('displayCartTable called successfully');
        } else {
            console.error('displayCartTable function not found');
            // Fallback for mobile
            displayCartFallback();
        }
    } catch (error) {
        console.error('Error loading cart:', error);
        displayCartFallback();
    }
}

// Fallback cart display for mobile issues
function displayCartFallback() {
    const cartBody = document.getElementById("cart-body");
    const totalAmountDiv = document.getElementById("total-amount");
    
    if (!cartBody) {
        console.error('cart-body element not found');
        return;
    }
    
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    cartBody.innerHTML = "";
    let total = 0;
    
    cart.forEach((item, index) => {
        const subtotal = item.price * item.quantity;
        total += subtotal;
        
        const row = document.createElement("tr");
        row.innerHTML = `
            <td><button onclick="removeItemMobile(${index})" style="background:red;color:white;border:none;padding:5px;border-radius:3px;">×</button></td>
            <td><img src="${item.image}" alt="${item.name}" width="50" style="max-width:50px;"></td>
            <td>${item.name}</td>
            <td>₹${item.price}</td>
            <td><input type="number" min="1" value="${item.quantity}" style="width:50px;" onchange="updateQuantityMobile(${index}, this.value)"></td>
            <td>₹${subtotal}</td>
        `;
        cartBody.appendChild(row);
    });
    
    if (totalAmountDiv) {
        totalAmountDiv.innerHTML = `Total: ₹${total}`;
    }
}

// Mobile-specific remove function
function removeItemMobile(index) {
    try {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        loadCartMobile();
    } catch (error) {
        console.error('Error removing item:', error);
    }
}

// Mobile-specific update quantity function
function updateQuantityMobile(index, newQuantity) {
    try {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart[index].quantity = parseInt(newQuantity);
        localStorage.setItem("cart", JSON.stringify(cart));
        loadCartMobile();
    } catch (error) {
        console.error('Error updating quantity:', error);
    }
}

// Mobile-friendly checkout
function checkoutMobile() {
    try {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        
        if (cart.length === 0) {
            alert("Your cart is empty!");
            return;
        }
        
        let message = "Hello! I'd like to order:\n\n";
        let total = 0;
        
        cart.forEach(item => {
            message += `${item.name} - ₹${item.price} x ${item.quantity}\n`;
            total += item.price * item.quantity;
        });
        
        message += `\nTotal: ₹${total}\n\nThank you!`;
        
        // For mobile, try different WhatsApp URL formats
        const whatsappNumber = "916200835077";
        const encodedMessage = encodeURIComponent(message);
        
        // Try mobile WhatsApp first
        const mobileWhatsApp = `whatsapp://send?phone=${whatsappNumber}&text=${encodedMessage}`;
        const webWhatsApp = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
        const apiWhatsApp = `https://api.whatsapp.com/send?phone=${whatsappNumber}&text=${encodedMessage}`;
        
        // Detect mobile device
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isMobile) {
            // Try mobile WhatsApp app first
            window.location.href = mobileWhatsApp;
            // Fallback after 2 seconds
            setTimeout(() => {
                window.open(webWhatsApp, "_blank");
            }, 2000);
        } else {
            window.open(webWhatsApp, "_blank");
        }
        
        // Clear cart after successful checkout
        localStorage.removeItem("cart");
        loadCartMobile();
        
    } catch (error) {
        console.error('Checkout error:', error);
        alert('Error during checkout. Please try again.');
    }
}

// Load cart when page loads - with multiple fallbacks
document.addEventListener('DOMContentLoaded', loadCartMobile);
window.addEventListener('load', loadCartMobile);
window.onload = loadCartMobile;

// Debug info for mobile
console.log('User Agent:', navigator.userAgent);
console.log('Local Storage available:', typeof Storage !== "undefined");

    </script>
    <script src="/newsletter.js"></script>

  </body>
</html>
